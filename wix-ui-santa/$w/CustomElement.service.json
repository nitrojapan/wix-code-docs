{ "name": "CustomElement",
  "memberOf": "$w",
  "mixes":
    [ "$w.Element",
      "$w.HiddenCollapsedMixin" ],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 5,
      "filename": "CustomElement.js" },
  "docs":
    { "summary": "An API for rendering a custom element.",
      "description":
        [ "A custom element is a reusable web component element that you define in a JavaScript file that is either ",
          " hosted by Wix or hosted on a server that is external to Wix.  The custom element is defined using ",
          " the standard ECMAScript 2015 class syntax. ",
          "",
          "This reference provides basic instructions for creating custom elements. ",
          "",
          "+ For complete instructions and examples, see <a href=\"https://developer.mozilla.org/en-US/docs/Web/Web_Components\"  target=\"_blank\">MDN documentation</a>. ",
          "+ For an article on using custom elements with Corvid, see <a href=\"https://support.wix.com/en/article/corvid-creating-your-own-custom-elements\" target=\"_blank\">this article</a>. ",
          "",
          "",
          "",
          " The general flow for working with custom elements and Corvid is: ",
          "",
          "",
          " 1. Code the custom element and its behavior in a JavaScript file using any IDE. ",
          " 1. In the Wix Editor's Add panel, <a href=\"https://support.wix.com/en/article/adding-a-custom-element-to-your-site\"  target=\"_blank\">add a custom element to the site</a>. In Settings,",
          "    connect the custom element's code to the custom element added to your page on the site.",
          " 1. Using Corvid, set up interactions between your site and the custom element. You can code event handling and additional functionality for the custom element. ",
          "",
          "You can also use Corvid for SEO support on custom elements. See [`seoMarkup`](https://www.wix.com/corvid/reference/$w.CustomElement.html#seoMarkup).",
          "",
          "   ",
          " Limitations",
          "",
          "",
          " + Custom elements are supported only for <a href=\"https://support.wix.com/en/article/upgrading-your-site-to-premium-3066683\"  target=\"_blank\">premium Wix users on sites with their own domain and Æ’with Wix ads removed</a>.",
          " + Layout for custom elements might appear differently when viewing in the Editor, when previewing, and on the live site after publishing. Consider <a href=\"https://support.wix.com/en/article/about-release-candidate-versions\"  target=\"_blank\">creating a release candidate</a> to check how the custom element will look on the site after publishing." ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties":
    [ { "name": "seoMarkup",
        "labels":
          [ "changed" ],
        "get": true,
        "set": false,
        "type": "string",
        "locations":
          [ { "lineno": 113,
              "filename": "CustomElement.js" } ],
        "docs":
          { "summary": "Sets or gets the SEO markup to be rendered for search engine bots.",
            "description":
              [ "Use the `seoMarkup` property to write HTML content that will be served to Google and other search engines.  This is necessary because some bots cannot process the JavaScript content of the custom element.",
                " If you do not add the equivalent HTML of the custom element's implementation using this SEO markup property, bots will not be able to render the custom element and will not index the custom element's content/markup in search engine results." ],
            "links": [],
            "examples":
              [ { "title": "Showcase syntax of custom element APIs",
                  "body":
                    [ "// **********************************************",
                      "// Custom Element Code in Corvid ",
                      "// **********************************************",
                      "",
                      "$w.onReady(function () {",
                      "",
                      "  // Sets the value of an attribute in the custom element. ",
                      "  // Use lowercase characters for the name of the attribute.",
                      "  $w('#myCustomElement').setAttribute('is-logged-in', wixUsers.currentUser.loggedIn);",
                      "",
                      "  // Handle an event on the custom element.  ",
                      "  $w('#myCustomElement').on('my-event', console.log('The event triggered successfully.') );",
                      "",
                      "  // Set the HTML content for SEO markup to be used by search engines",
                      "  $w('#myCustomElement').seoMarkup = 'Hello world!';",
                      "",
                      "});",
                      "",
                      "// **********************************************",
                      "// Custom Element Implementation on an HTML Page",
                      "// **********************************************",
                      "",
                      "class MyElement extends HTMLElement {",
                      "",
                      "  // Define a special callback function that runs when ",
                      "  // the custom element is connected initially to the DOM. ",
                      "  connectedCallback() {",
                      "",
                      "    this.innerHTML = 'Hello world!'",
                      "",
                      "    // Trigger an event that Corvid can watch for and handle ",
                      "    // using the [`on`](https://www.wix.com/corvid/reference/$w.IFrame.html#global) function.",
                      "    this.dispatchEvent(new CustomEvent('my-event')",
                      "  }",
                      "}",
                      "",
                      "// Register the custom element. The name \"my-custom-element\" is the ",
                      "// tag name to specify when adding the custom element in the Wix ",
                      "// Editor to the site.",
                      "customElements.define('my-custom-element', MyElement);",
                      "  ",
                      "",
                      "// *****************************************************",
                      "// Custom Element's Result",
                      "// *****************************************************",
                      "<my-custom-element is-logged-in=\"true\">Hello World!</my-custom-element>",
                      "" ],
                  "extra":
                    { "description": "This example showcases the syntax for using custom element APIs: \n\n + On the custom element side: <a href=\"https://developer.mozilla.org/en-US/docs/Web/Web_Components\"  target=\"_blank\">`connectedCallback()`</a>, <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\"  target=\"_blank\">dispatchEvent()`</a>, and <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\"  target=\"_blank\">`customElements.define()`</a>.\n + On the Corvid side: [`on()`](https://www.wix.com/corvid/reference/$w.CustomElement.html#on), [`setAttribute()`](https://www.wix.com/corvid/reference/$w.CustomElement.html#setAttribute), and [`seoMarkup()`](https://www.wix.com/corvid/reference/$w.CustomElement.html#seoMarkup)." } } ],
            "extra":
              {  } },
        "extra":
          { "notes":
              [ "It is the user's responsibility to handle all aspects of SEO for the element, including managing the validity of the \n SEO markup opposite search engines." ] } } ],
  "operations":
    [ { "name": "on",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "eventName",
              "type": "string",
              "doc": "The name of the event." },
            { "name": "callBackFunction",
              "type": "Function",
              "doc": "The callback function to run when the event is triggered." } ],
        "ret":
          { "type": "$w.CustomElement",
            "doc": "The custom element." },
        "locations":
          [ { "lineno": 77,
              "filename": "CustomElement.js" } ],
        "docs":
          { "summary": "Registers a callback function in Corvid for an event triggered from the custom element.",
            "description":
              [ "The `on()` function registers a callback function in Corvid based on the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\"  target=\"_blank\">`this.dispatchEvent()`</a> in the custom element's script. ",
                "",
                " The `on()` function enables the custom element to affect the rendering of the site. ",
                "",
                " The code snippets below demonstrate how to define a `my-event` event in the custom element's implementation and how to refer to it from Corvid.",
                "",
                " ![on-event](images/customElement_on.png \"On Event\")" ],
            "links": [],
            "examples":
              [ { "title": "Showcase syntax of custom element APIs",
                  "body":
                    [ "// **********************************************",
                      "// Custom Element Code in Corvid ",
                      "// **********************************************",
                      "",
                      "$w.onReady(function () {",
                      "",
                      "  // Sets the value of an attribute in the custom element. ",
                      "  // Use lowercase characters for the name of the attribute.",
                      "  $w('#myCustomElement').setAttribute('is-logged-in', wixUsers.currentUser.loggedIn);",
                      "",
                      "  // Handle an event on the custom element.  ",
                      "  $w('#myCustomElement').on('my-event', console.log('The event triggered successfully.') );",
                      "",
                      "  // Set the HTML content for SEO markup to be used by search engines",
                      "  $w('#myCustomElement').seoMarkup = 'Hello world!';",
                      "",
                      "});",
                      "",
                      "// **********************************************",
                      "// Custom Element Implementation on an HTML Page",
                      "// **********************************************",
                      "",
                      "class MyElement extends HTMLElement {",
                      "",
                      "  // Define a special callback function that runs when ",
                      "  // the custom element is connected initially to the DOM. ",
                      "  connectedCallback() {",
                      "",
                      "    this.innerHTML = 'Hello world!'",
                      "",
                      "    // Trigger an event that Corvid can watch for and handle ",
                      "    // using the [`on`](https://www.wix.com/corvid/reference/$w.IFrame.html#global) function.",
                      "    this.dispatchEvent(new CustomEvent('my-event')",
                      "  }",
                      "}",
                      "",
                      "// Register the custom element. The name \"my-custom-element\" is the ",
                      "// tag name to specify when adding the custom element in the Wix ",
                      "// Editor to the site.",
                      "customElements.define('my-custom-element', MyElement);",
                      "  ",
                      "",
                      "// *****************************************************",
                      "// Custom Element's Result",
                      "// *****************************************************",
                      "<my-custom-element is-logged-in=\"true\">Hello World!</my-custom-element>",
                      "" ],
                  "extra":
                    { "description": "This example showcases the syntax for using custom element APIs: \n\n + On the custom element side: <a href=\"https://developer.mozilla.org/en-US/docs/Web/Web_Components\"  target=\"_blank\">`connectedCallback()`</a>, <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\"  target=\"_blank\">dispatchEvent()`</a>, and <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\"  target=\"_blank\">`customElements.define()`</a>.\n + On the Corvid side: [`on()`](https://www.wix.com/corvid/reference/$w.CustomElement.html#on), [`setAttribute()`](https://www.wix.com/corvid/reference/$w.CustomElement.html#setAttribute), and [`seoMarkup()`](https://www.wix.com/corvid/reference/$w.CustomElement.html#seoMarkup)." } },
                { "title": "This example shows how the Corvid API function `on()` can be used to check if events defined in the custom element occur.",
                  "body":
                    [ "// **********************************************",
                      "// Custom Element Implementation on an HTML Page",
                      "// **********************************************",
                      "",
                      "// Code to set up variables and styles for the logo. ",
                      "const LOGO_TXT = 'https://static.wixstatic.com/media/logo-txt.png';",
                      "const LOGO_IMG = 'https://static.wixstatic.com/media/logo-img.png';",
                      "const LOGO_PHONE ='https://static.wixstatic.com/media/logo-phone.png';",
                      "",
                      "const STYLE = `",
                      "#img.shake {",
                      "    animation: shake 0.5s;",
                      "    animation-iteration-count: infinite;",
                      "  }",
                      "",
                      "  @keyframes shake {",
                      "    0% { transform: translate(1px, 1px) rotate(0deg); }",
                      "    10% { transform: translate(-1px, -2px) rotate(-1deg); }",
                      "    20% { transform: translate(-3px, 0px) rotate(1deg); }",
                      "    30% { transform: translate(3px, 2px) rotate(0deg); }",
                      "    40% { transform: translate(1px, -1px) rotate(1deg); }",
                      "    50% { transform: translate(-1px, 2px) rotate(-1deg); }",
                      "    60% { transform: translate(-3px, 1px) rotate(0deg); }",
                      "    70% { transform: translate(3px, 1px) rotate(-1deg); }",
                      "    80% { transform: translate(-1px, -1px) rotate(1deg); }",
                      "    90% { transform: translate(1px, 2px) rotate(0deg); }",
                      "    100% { transform: translate(1px, -2px) rotate(-1deg); }",
                      "  }",
                      "`;",
                      "",
                      "// Code to check if the size of the custom element has ",
                      "// changed. ",
                      "const dispatchSizeChange = (root,scaleTxt) => {",
                      "  const gettingSmall = scaleTxt === 0 && root.prevScaleTxt !== 0;",
                      "  const gettingBig = scaleTxt !== 0 && root.prevScaleTxt === 0;",
                      "  root.prevScaleTxt = scaleTxt;",
                      "",
                      "  // Use dispatchEvent() to create a new custom event that ",
                      "  // Corvid can handle. In our example, the event is ",
                      "  // triggered when the size of the custom element gets bigger or ",
                      "  // smaller.",
                      "  if (gettingSmall || gettingBig) {",
                      "    root.dispatchEvent(new CustomEvent('sizeChange', ",
                      "        { detail: { data: gettingSmall ? 'small' : 'big' } }));",
                      "  }",
                      "};",
                      "",
                      "// Code to rotate and resize the custom element. ",
                      "const scrollHandler = root => (event) => {",
                      "  const txt = root.querySelector('#txt');",
                      "  const scaleTxt = (Math.max(0, 1000 - window.scrollY)) / 1000;",
                      "  txt.style.transform = `scale(${scaleTxt})`;",
                      "  dispatchSizeChange(root, scaleTxt);",
                      "  const opacityTxt = 1 / Math.log10(Math.max(10, window.scrollY));",
                      "  txt.style.opacity = opacityTxt;",
                      "  const img = root.querySelector('#img');",
                      "  img.style.transform = `rotate(${window.scrollY / 10}deg)`;",
                      "}",
                      "",
                      "// Code to create each image that the logo comprises and ",
                      "// add the logo to the DOM using a `createImg()` function.",
                      "const createImg = (id, src) => {",
                      "  const img = document.createElement('img');",
                      "  img.src = src;",
                      "  img.id = id;",
                      "  img.width = '200';",
                      "  img.style.position = 'fixed';",
                      "  return img;",
                      "}",
                      "",
                      "// Code to define the custom element based on the ",
                      "// definitions above.",
                      "class allEffects extends HTMLElement {",
                      "",
                      "  constructor() {",
                      "    super();",
                      "",
                      "    document.addEventListener('wheel', scrollHandler(this), {",
                      "        capture: false, passive: true })",
                      "        const style = document.createElement('style');",
                      "        style.innerHTML = STYLE;",
                      "        this.appendChild(style);",
                      "  }",
                      "",
                      "  // Code for a special lifecycle function `connectedCallback()`",
                      "  // that runs when the custom element is connected initially to the DOM.",
                      "  // This function displays the various parts of the logo.",
                      "  connectedCallback() {",
                      "    this.appendChild(createImg('txt', LOGO_TXT));",
                      "    this.appendChild(createImg('img', LOGO_IMG));",
                      "    this.appendChild(createImg('img', LOGO_PHONE));",
                      "    const phone = createImg('phone', LOGO_PHONE);",
                      "    phone.style.display = 'none';",
                      "    this.appendChild(phone);",
                      "  }",
                      "",
                      "  // Code for a special lifecycle function `attributeChangedCallback()`",
                      "  // that checks if the context of the page has changed. ",
                      "  attributeChangedCallback(name, oldValue, newValue) {   ",
                      "    if (name === 'hoveringmenu') {",
                      "      this.querySelector('#img').className = newValue === 'true' ? 'shake' : '';",
                      "    }",
                      "    if (name === 'footershown') {",
                      "      this.querySelector('#phone').style.display = newValue === 'true' ? '' : 'none';",
                      "    }",
                      "  }",
                      "",
                      "  // Code for a special lifecycle function `observedAttributes()`",
                      "  // that checks specific attributes on the page. ",
                      "  static get observedAttributes() {",
                      "    return ['hoveringmenu', 'footershown'];",
                      "  }",
                      "}",
                      "",
                      "// Code to register the custom element. The name `my-logo-effects` is the ",
                      "// tag name to specify when adding the custom element in the Wix ",
                      "// Editor to the site. Make sure the tag name is in lowercase characters. ",
                      "customElements.define('my-logo-effects', allEffects);",
                      "  ",
                      "",
                      "// **********************************************",
                      "// Corvid Code for Custom Element on Page",
                      "// **********************************************",
                      "",
                      "// Use `on()` to handle the `sizeChange` event defined in the ",
                      "// custom element. In this case, if the logo is very small, ",
                      "// the menu on the page is hidden. This is because one of the ",
                      "// defined behaviors of the element is that the logo gets ",
                      "// smaller as we scroll down the page.",
                      "$w.onReady(function () {",
                      "  $w('#myCustomElement').on('sizeChange', ({detail: {data}}) => {",
                      "    if (data === 'small') {",
                      "      $w('#menu').hide();",
                      "    } else {",
                      "      $w('#menu').show();",
                      "    }",
                      "  })",
                      "});",
                      "",
                      "// **********************************************",
                      "// Custom Element Code on Site in Corvid ",
                      "// **********************************************",
                      "",
                      "// The custom element's behavior will change for the entire",
                      "//  site in the following cases: ",
                      "// ",
                      "// + If the footer enters or leaves the viewport.",
                      "// + If the site visitor's mouse hovers or stops hovering over the menu.",
                      "// ",
                      "// Corvid \"sends\" the custom element attributes using `setAttribute()`",
                      "// so the element can process and and affect the element's behaviors",
                      "// according to the context on the page. ",
                      "export function footer1_viewportEnter(event) {",
                      "  $w('#myCustomElement').setAttribute('footershown', true);",
                      " }",
                      "export function footer1_viewportLeave(event) {",
                      " $w('#myCustomElement').setAttribute('footershown', false);",
                      "}",
                      "export function menu_mouseIn(event) {",
                      " $w('#myCustomElement').setAttribute('hoveringmenu', true);",
                      "}",
                      "export function menu_mouseOut(event) {",
                      " $w('myCustomElement').setAttribute('hoveringmenu', false);",
                      "}",
                      "" ],
                  "extra":
                    { "description": "<ahref=\"https://support.wix.com/en/article/corvid-example-coding-a-more-robust-custom-element\" target=\"_blank\">Learn more</a> about this example." } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "setAttribute",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "key",
              "type": "string",
              "doc": "The name of the attribute. Use lowercase characters." },
            { "name": "value",
              "type": "string",
              "doc": "The value of the attribute." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 47,
              "filename": "CustomElement.js" } ],
        "docs":
          { "summary": "Sets an HTML attribute on the custom element's DOM node.",
            "description":
              [ "We can use `setAttribute()` to affect the custom element's definition and defined behavior. Consider it a way for Corvid to pass information to the custom element based on the context of the site. ",
                "",
                "Each `setAttribute()` function sets one attribute at a time using a key-value pair. Use multiple functions to set more than one attribute. ",
                "",
                "If the custom element does not yet have the attribute, `setAttribute()` creates it." ],
            "links": [],
            "examples":
              [ { "title": "Showcase syntax of custom element APIs",
                  "body":
                    [ "// **********************************************",
                      "// Custom Element Code in Corvid ",
                      "// **********************************************",
                      "",
                      "$w.onReady(function () {",
                      "",
                      "  // Sets the value of an attribute in the custom element. ",
                      "  // Use lowercase characters for the name of the attribute.",
                      "  $w('#myCustomElement').setAttribute('is-logged-in', wixUsers.currentUser.loggedIn);",
                      "",
                      "  // Handle an event on the custom element.  ",
                      "  $w('#myCustomElement').on('my-event', console.log('The event triggered successfully.') );",
                      "",
                      "  // Set the HTML content for SEO markup to be used by search engines",
                      "  $w('#myCustomElement').seoMarkup = 'Hello world!';",
                      "",
                      "});",
                      "",
                      "// **********************************************",
                      "// Custom Element Implementation on an HTML Page",
                      "// **********************************************",
                      "",
                      "class MyElement extends HTMLElement {",
                      "",
                      "  // Define a special callback function that runs when ",
                      "  // the custom element is connected initially to the DOM. ",
                      "  connectedCallback() {",
                      "",
                      "    this.innerHTML = 'Hello world!'",
                      "",
                      "    // Trigger an event that Corvid can watch for and handle ",
                      "    // using the [`on`](https://www.wix.com/corvid/reference/$w.IFrame.html#global) function.",
                      "    this.dispatchEvent(new CustomEvent('my-event')",
                      "  }",
                      "}",
                      "",
                      "// Register the custom element. The name \"my-custom-element\" is the ",
                      "// tag name to specify when adding the custom element in the Wix ",
                      "// Editor to the site.",
                      "customElements.define('my-custom-element', MyElement);",
                      "  ",
                      "",
                      "// *****************************************************",
                      "// Custom Element's Result",
                      "// *****************************************************",
                      "<my-custom-element is-logged-in=\"true\">Hello World!</my-custom-element>",
                      "" ],
                  "extra":
                    { "description": "This example showcases the syntax for using custom element APIs: \n\n + On the custom element side: <a href=\"https://developer.mozilla.org/en-US/docs/Web/Web_Components\"  target=\"_blank\">`connectedCallback()`</a>, <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\"  target=\"_blank\">dispatchEvent()`</a>, and <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\"  target=\"_blank\">`customElements.define()`</a>.\n + On the Corvid side: [`on()`](https://www.wix.com/corvid/reference/$w.CustomElement.html#on), [`setAttribute()`](https://www.wix.com/corvid/reference/$w.CustomElement.html#setAttribute), and [`seoMarkup()`](https://www.wix.com/corvid/reference/$w.CustomElement.html#seoMarkup)." } },
                { "title": "Create a custom element that receives information about the context of the page from Corvid with `setAttribute()`.",
                  "body":
                    [ "// **********************************************",
                      "// Custom Element Implementation on an HTML Page",
                      "// **********************************************",
                      "",
                      "// Code to set up variables and styles for the logo. ",
                      "const LOGO_TXT = 'https://static.wixstatic.com/media/logo-txt.png';",
                      "const LOGO_IMG = 'https://static.wixstatic.com/media/logo-img.png';",
                      "const LOGO_PHONE ='https://static.wixstatic.com/media/logo-phone.png';",
                      "",
                      "const STYLE = `",
                      "#img.shake {",
                      "    animation: shake 0.5s;",
                      "    animation-iteration-count: infinite;",
                      "  }",
                      "",
                      "  @keyframes shake {",
                      "    0% { transform: translate(1px, 1px) rotate(0deg); }",
                      "    10% { transform: translate(-1px, -2px) rotate(-1deg); }",
                      "    20% { transform: translate(-3px, 0px) rotate(1deg); }",
                      "    30% { transform: translate(3px, 2px) rotate(0deg); }",
                      "    40% { transform: translate(1px, -1px) rotate(1deg); }",
                      "    50% { transform: translate(-1px, 2px) rotate(-1deg); }",
                      "    60% { transform: translate(-3px, 1px) rotate(0deg); }",
                      "    70% { transform: translate(3px, 1px) rotate(-1deg); }",
                      "    80% { transform: translate(-1px, -1px) rotate(1deg); }",
                      "    90% { transform: translate(1px, 2px) rotate(0deg); }",
                      "    100% { transform: translate(1px, -2px) rotate(-1deg); }",
                      "  }",
                      "`;",
                      "",
                      "// Code to check if the size of the custom element has ",
                      "// changed. ",
                      "const dispatchSizeChange = (root,scaleTxt) => {",
                      "  const gettingSmall = scaleTxt === 0 && root.prevScaleTxt !== 0;",
                      "  const gettingBig = scaleTxt !== 0 && root.prevScaleTxt === 0;",
                      "  root.prevScaleTxt = scaleTxt;",
                      "",
                      "  // Use dispatchEvent() to create a new custom event that ",
                      "  // Corvid can handle. In our example, the event is ",
                      "  // triggered when the size of the custom element gets bigger or ",
                      "  // smaller.",
                      "  if (gettingSmall || gettingBig) {",
                      "    root.dispatchEvent(new CustomEvent('sizeChange', ",
                      "        { detail: { data: gettingSmall ? 'small' : 'big' } }));",
                      "  }",
                      "};",
                      "",
                      "// Code to rotate and resize the custom element. ",
                      "const scrollHandler = root => (event) => {",
                      "  const txt = root.querySelector('#txt');",
                      "  const scaleTxt = (Math.max(0, 1000 - window.scrollY)) / 1000;",
                      "  txt.style.transform = `scale(${scaleTxt})`;",
                      "  dispatchSizeChange(root, scaleTxt);",
                      "  const opacityTxt = 1 / Math.log10(Math.max(10, window.scrollY));",
                      "  txt.style.opacity = opacityTxt;",
                      "  const img = root.querySelector('#img');",
                      "  img.style.transform = `rotate(${window.scrollY / 10}deg)`;",
                      "}",
                      "",
                      "// Code to create each image that the logo comprises and ",
                      "// add the logo to the DOM using a `createImg()` function.",
                      "const createImg = (id, src) => {",
                      "  const img = document.createElement('img');",
                      "  img.src = src;",
                      "  img.id = id;",
                      "  img.width = '200';",
                      "  img.style.position = 'fixed';",
                      "  return img;",
                      "}",
                      "",
                      "// Code to define the custom element based on the ",
                      "// definitions above.",
                      "class allEffects extends HTMLElement {",
                      "",
                      "  constructor() {",
                      "    super();",
                      "",
                      "    document.addEventListener('wheel', scrollHandler(this), {",
                      "        capture: false, passive: true })",
                      "        const style = document.createElement('style');",
                      "        style.innerHTML = STYLE;",
                      "        this.appendChild(style);",
                      "  }",
                      "",
                      "  // Code for a special lifecycle function `connectedCallback()`",
                      "  // that runs when the custom element is connected initially to the DOM.",
                      "  // This function displays the various parts of the logo.",
                      "  connectedCallback() {",
                      "    this.appendChild(createImg('txt', LOGO_TXT));",
                      "    this.appendChild(createImg('img', LOGO_IMG));",
                      "    this.appendChild(createImg('img', LOGO_PHONE));",
                      "    const phone = createImg('phone', LOGO_PHONE);",
                      "    phone.style.display = 'none';",
                      "    this.appendChild(phone);",
                      "  }",
                      "",
                      "  // Code for a special lifecycle function `attributeChangedCallback()`",
                      "  // that checks if the context of the page has changed. ",
                      "  attributeChangedCallback(name, oldValue, newValue) {   ",
                      "    if (name === 'hoveringmenu') {",
                      "      this.querySelector('#img').className = newValue === 'true' ? 'shake' : '';",
                      "    }",
                      "    if (name === 'footershown') {",
                      "      this.querySelector('#phone').style.display = newValue === 'true' ? '' : 'none';",
                      "    }",
                      "  }",
                      "",
                      "  // Code for a special lifecycle function `observedAttributes()`",
                      "  // that checks specific attributes on the page. ",
                      "  static get observedAttributes() {",
                      "    return ['hoveringmenu', 'footershown'];",
                      "  }",
                      "}",
                      "",
                      "// Code to register the custom element. The name `my-logo-effects` is the ",
                      "// tag name to specify when adding the custom element in the Wix ",
                      "// Editor to the site. Make sure the tag name is in lowercase characters. ",
                      "customElements.define('my-logo-effects', allEffects);",
                      "  ",
                      "",
                      "// **********************************************",
                      "// Corvid Code for Custom Element on Page",
                      "// **********************************************",
                      "",
                      "// Use `on()` to handle the `sizeChange` event defined in the ",
                      "// custom element. In this case, if the logo is very small, ",
                      "// the menu on the page is hidden. This is because one of the ",
                      "// defined behaviors of the element is that the logo gets ",
                      "// smaller as we scroll down the page.",
                      "$w.onReady(function () {",
                      "  $w('#myCustomElement').on('sizeChange', ({detail: {data}}) => {",
                      "    if (data === 'small') {",
                      "      $w('#menu').hide();",
                      "    } else {",
                      "      $w('#menu').show();",
                      "    }",
                      "  })",
                      "});",
                      "",
                      "// **********************************************",
                      "// Custom Element Code on Site in Corvid ",
                      "// **********************************************",
                      "",
                      "// The custom element's behavior will change for the entire",
                      "//  site in the following cases: ",
                      "// ",
                      "// + If the footer enters or leaves the viewport.",
                      "// + If the site visitor's mouse hovers or stops hovering over the menu.",
                      "// ",
                      "// Corvid \"sends\" the custom element attributes using `setAttribute()`",
                      "// so the element can process and and affect the element's behaviors",
                      "// according to the context on the page. ",
                      "export function footer1_viewportEnter(event) {",
                      "  $w('#myCustomElement').setAttribute('footershown', true);",
                      " }",
                      "export function footer1_viewportLeave(event) {",
                      " $w('#myCustomElement').setAttribute('footershown', false);",
                      "}",
                      "export function menu_mouseIn(event) {",
                      " $w('#myCustomElement').setAttribute('hoveringmenu', true);",
                      "}",
                      "export function menu_mouseOut(event) {",
                      " $w('myCustomElement').setAttribute('hoveringmenu', false);",
                      "}",
                      "" ],
                  "extra":
                    { "description": "<ahref=\"https://support.wix.com/en/article/corvid-example-coding-a-more-robust-custom-element\" target=\"_blank\">Learn more</a> about this example." } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages": [],
  "extra":
    {  } }