{ "name": "CustomElement",
  "memberOf": "$w",
  "mixes":
    [ "$w.Element",
      "$w.HiddenCollapsedMixin" ],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 5,
      "filename": "CustomElement.js" },
  "docs":
    { "summary": "An API for rendering a custom element.",
      "description":
        [ "A custom element is a reusable web component element that you define in a JavaScript file that is either ",
          " hosted by Wix or hosted on a server that is external to Wix.  The custom element is defined using ",
          " the standard ECMAScript 2015 class syntax. ",
          "",
          "This reference provides basic instructions for creating custom elements. ",
          "",
          "+ For complete instructions and examples, see <a href=\"https://developer.mozilla.org/en-US/docs/Web/Web_Components\"  target=\"_blank\">MDN documentation</a>. ",
          "+ For an article on using custom elements with Corvid, see <a href=\"https://support.wix.com/en/article/corvid-creating-your-own-custom-elements\" target=\"_blank\">this article</a>. ",
          "",
          "",
          "",
          " The general flow for working with custom elements is: ",
          "",
          "",
          " 1. Code the custom element and its behavior in a JavaScript file using any IDE. ",
          " 1. In the Wix Editor's Add panel, <a href=\"https://support.wix.com/en/article/adding-a-custom-element-to-your-site\"  target=\"_blank\">add a custom element to the site</a>. In Settings,",
          "    connect the custom element's code to the custom element added to your page on the site.",
          " 1. Using Corvid, set up interactions between your site and the custom element. With Corvid, you can code event handling and additional functionality for the custom element. ",
          "",
          "You can also use Corvid for SEO support on custom elements. See [`seoMarkup`](https://www.wix.com/corvid/reference/$w.CustomElement.html#seoMarkup).",
          "",
          "   ",
          " Limitations",
          "",
          "",
          " + Custom elements are supported only for <a href=\"https://support.wix.com/en/article/upgrading-your-site-to-premium-3066683\"  target=\"_blank\">premium Wix users on sites with their own domain with Wix ads removed.</a>.",
          " + Layout for custom elements might appear differently when viewing in the Editor, when previewing, and on the live site after publishing. Consider <a href=\"https://support.wix.com/en/article/about-release-candidate-versions\"  target=\"_blank\">creating a release candidate</a> to check how the custom element will look on the site after publishing." ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties":
    [ { "name": "seoMarkup",
        "labels":
          [ "changed" ],
        "get": true,
        "set": false,
        "type": "string",
        "locations":
          [ { "lineno": 98,
              "filename": "CustomElement.js" } ],
        "docs":
          { "summary": "Sets or gets the SEO markup to be rendered for search engine bots.",
            "description":
              [ "Use the `seoMarkup` property to write HTML content that will be served to Google and other search engines.  This is necessary because some bots cannot process the JavaScript content of the custom element.",
                " If you do not add the equivalent HTML of the custom element's implementation using this SEO markup property, bots will not be able to render the custom element and will not index the custom element's content/markup in search engine results." ],
            "links": [],
            "examples":
              [ { "title": "Define and use a custom element",
                  "body":
                    [ "// **********************************************",
                      "// Custom Element Code in Corvid ",
                      "// **********************************************",
                      "",
                      "$w.onReady(function () {",
                      "",
                      "  // Sets the value of an attribute in the custom element. ",
                      "  $w('#myCustomElement').setAttribute('is-logged-in', wixUsers.currentUser.loggedIn);",
                      "",
                      "  // Handle an event on the custom element.  ",
                      "  $w('#myCustomElement').on('my-event', console.log('The event triggered successfully.') );",
                      "",
                      "  // Set the HTML content for SEO markup to be used by search engines",
                      "  $w('#myCustomElement').seoMarkup = '<div>logged in status</div>';",
                      "",
                      "});",
                      "",
                      "// **********************************************",
                      "// Custom Element Implementation on an HTML Page",
                      "// **********************************************",
                      "",
                      "class MyElement extends HTMLElement {",
                      "",
                      "  // Define a special callback function that runs when ",
                      "  // the custom element is connected initially to the DOM. ",
                      "  connectedCallback() {",
                      "",
                      "    this.innerHTML = 'Hello world!'",
                      "",
                      "    // Trigger an event that Corvid can watch for and handle ",
                      "    // using the [`on`](https://www.wix.com/corvid/reference/$w.IFrame.html#global) function.",
                      "    this.dispatchEvent(new CustomEvent('my-event')",
                      "  }",
                      "}",
                      "",
                      "// Register the custom element. The name \"myCustomElement\" is the ",
                      "// tag name to specify when adding the custom element in the Wix ",
                      "// Editor to the site.",
                      "customElements.define('myCustomElement', MyElement);",
                      "  ",
                      "// *****************************************************",
                      "// Custom Element's Javascript Result",
                      "// *****************************************************",
                      "<myCustomElement is-logged-in=\"true\" inner html </myCustomElement>",
                      "",
                      "// *****************************************************",
                      "// Custom Element's HTML Result for Search Engine Bots",
                      "// *****************************************************",
                      "<myCustomElement><div>Hello World!</div></myCustomElement>" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          { "notes":
              [ "It is the user's responsibility to handle all aspects of SEO for the element, including managing the validity of the \n SEO markup opposite search engines." ] } } ],
  "operations":
    [ { "name": "on",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "eventName",
              "type": "string",
              "doc": "The name of the event." },
            { "name": "callBackFunction",
              "type": "Function",
              "doc": "The callback function to run when the event is triggered." } ],
        "ret":
          { "type": "$w.CustomElement",
            "doc": "The custom element." },
        "locations":
          [ { "lineno": 69,
              "filename": "CustomElement.js" } ],
        "docs":
          { "summary": "Registers a callback function in Corvid for an event triggered from the custom element.",
            "description":
              [ "The `on()` function registers a callback function in Corvid based on the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\"  target=\"_blank\">`this.dispatchEvent()`</a> in the custom element's implementation. ",
                "",
                " The `on()` function enables the custom element to affect the rendering of the site. ",
                "",
                " The code snippets below demonstrate how to define a `my-event` event in the custom element's implementation and how to refer to it from Corvid.",
                "",
                " ![on-event](images/customElement_on.png \"On Event\")" ],
            "links": [],
            "examples":
              [ { "title": "Define and use a custom element",
                  "body":
                    [ "// **********************************************",
                      "// Custom Element Code in Corvid ",
                      "// **********************************************",
                      "",
                      "$w.onReady(function () {",
                      "",
                      "  // Sets the value of an attribute in the custom element. ",
                      "  $w('#myCustomElement').setAttribute('is-logged-in', wixUsers.currentUser.loggedIn);",
                      "",
                      "  // Handle an event on the custom element.  ",
                      "  $w('#myCustomElement').on('my-event', console.log('The event triggered successfully.') );",
                      "",
                      "  // Set the HTML content for SEO markup to be used by search engines",
                      "  $w('#myCustomElement').seoMarkup = '<div>logged in status</div>';",
                      "",
                      "});",
                      "",
                      "// **********************************************",
                      "// Custom Element Implementation on an HTML Page",
                      "// **********************************************",
                      "",
                      "class MyElement extends HTMLElement {",
                      "",
                      "  // Define a special callback function that runs when ",
                      "  // the custom element is connected initially to the DOM. ",
                      "  connectedCallback() {",
                      "",
                      "    this.innerHTML = 'Hello world!'",
                      "",
                      "    // Trigger an event that Corvid can watch for and handle ",
                      "    // using the [`on`](https://www.wix.com/corvid/reference/$w.IFrame.html#global) function.",
                      "    this.dispatchEvent(new CustomEvent('my-event')",
                      "  }",
                      "}",
                      "",
                      "// Register the custom element. The name \"myCustomElement\" is the ",
                      "// tag name to specify when adding the custom element in the Wix ",
                      "// Editor to the site.",
                      "customElements.define('myCustomElement', MyElement);",
                      "  ",
                      "// *****************************************************",
                      "// Custom Element's Javascript Result",
                      "// *****************************************************",
                      "<myCustomElement is-logged-in=\"true\" inner html </myCustomElement>",
                      "",
                      "// *****************************************************",
                      "// Custom Element's HTML Result for Search Engine Bots",
                      "// *****************************************************",
                      "<myCustomElement><div>Hello World!</div></myCustomElement>" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "setAttribute",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "key",
              "type": "string",
              "doc": "The name of the attribute." },
            { "name": "value",
              "type": "string",
              "doc": "The value of the attribute." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 47,
              "filename": "CustomElement.js" } ],
        "docs":
          { "summary": "Sets an HTML attribute on the custom element's DOM node.",
            "description":
              [ "We can use `setAttribute()` to affect the custom element's definition and defined behavior. Consider it a way for Corvid to pass information to the custom element based on the context of the site. ",
                "",
                "Each `setAttribute()` function sets one attribute at a time using a key-value pair. Use multiple functions to set more than one attribute. ",
                "",
                "If the custom element does not yet have the attribute, `setAttribute()` creates it." ],
            "links": [],
            "examples":
              [ { "title": "Define and use a custom element",
                  "body":
                    [ "// **********************************************",
                      "// Custom Element Code in Corvid ",
                      "// **********************************************",
                      "",
                      "$w.onReady(function () {",
                      "",
                      "  // Sets the value of an attribute in the custom element. ",
                      "  $w('#myCustomElement').setAttribute('is-logged-in', wixUsers.currentUser.loggedIn);",
                      "",
                      "  // Handle an event on the custom element.  ",
                      "  $w('#myCustomElement').on('my-event', console.log('The event triggered successfully.') );",
                      "",
                      "  // Set the HTML content for SEO markup to be used by search engines",
                      "  $w('#myCustomElement').seoMarkup = '<div>logged in status</div>';",
                      "",
                      "});",
                      "",
                      "// **********************************************",
                      "// Custom Element Implementation on an HTML Page",
                      "// **********************************************",
                      "",
                      "class MyElement extends HTMLElement {",
                      "",
                      "  // Define a special callback function that runs when ",
                      "  // the custom element is connected initially to the DOM. ",
                      "  connectedCallback() {",
                      "",
                      "    this.innerHTML = 'Hello world!'",
                      "",
                      "    // Trigger an event that Corvid can watch for and handle ",
                      "    // using the [`on`](https://www.wix.com/corvid/reference/$w.IFrame.html#global) function.",
                      "    this.dispatchEvent(new CustomEvent('my-event')",
                      "  }",
                      "}",
                      "",
                      "// Register the custom element. The name \"myCustomElement\" is the ",
                      "// tag name to specify when adding the custom element in the Wix ",
                      "// Editor to the site.",
                      "customElements.define('myCustomElement', MyElement);",
                      "  ",
                      "// *****************************************************",
                      "// Custom Element's Javascript Result",
                      "// *****************************************************",
                      "<myCustomElement is-logged-in=\"true\" inner html </myCustomElement>",
                      "",
                      "// *****************************************************",
                      "// Custom Element's HTML Result for Search Engine Bots",
                      "// *****************************************************",
                      "<myCustomElement><div>Hello World!</div></myCustomElement>" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages": [],
  "extra":
    {  } }